<!DOCTYPE html>
<html>
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>WeSA: Investigate your interactions</title>
        <link
                rel="shortcut icon"
                type="image/x-icon"
                href="static/images/favicon.ico.png"
        />

        <link
                rel="stylesheet"
                href="https://fonts.googleapis.com/css?family=Staatliches|Lato|Audiowide|Source+Sans+Pro:400,600"
        />
        <link
                rel="stylesheet"
                type="text/css"
                href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
                integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
                crossorigin="anonymous"
        />
        <link
                rel="stylesheet"
                type="text/css"
                href="https://use.fontawesome.com/releases/v5.2.0/css/all.css"
                integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ"
                crossorigin="anonymous"
        />
        <link
                rel="stylesheet"
                type="text/css"
                href="{{ url_for('static',filename='css/common.css') }}?v=b3bae01ae7edceff2c15cdafaa8df76d"
        />
        <link
                rel="stylesheet"
                type="text/css"
                href="{{ url_for('static',filename='css/index_style.css') }}?v=b4e67325f71ddab61d816fc9c233a4a7"
        />

        <!-- <script
                type="text/javascript"
                src="{{ url_for('static',filename='js/jquery-3.3.1.js') }}"
        ></script> -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script
                type="text/javascript"
                src="{{ url_for('static',filename='js/index.js') }}"
        ></script> <!-- this part is not linking to the js file for sme reason, so I've included the examples code below-->
        <script>
                $(document).ready(function(){
    $("#ex1").click(function() {
        $("#prots_input").val(`POLR2K
POLR2A
POLR2B
POLR2C
POLR3A
POLR3C
POLR1D
POLR1A`);
        $("#DataSource").val("intact");
    });

    $("#ex2").click(function() {
            $("#prots_input").val(`BBS7
BBS10
LZTFL1`);
            $("#DataSource").val("intact");
    });

    $("#ex3").click(function() {
                $("#prots_input").val(`IFT172 IFT80
IFT172 IFT57
IFT172 LCA5
IFT172 KATNIP
IFT172 TRAF3IP1
IFT172 IFT88
IFT172 IFT52
IFT172 IFT20`);
            $("#DataSource").val("intact");
    });

    $("#ex4").click(function() {
            $("#prots_input").val(`CCT3 CCT2 experiment01
CCT3 CCT4 experiment01
CCT4 CCT2 experiment02
IFT57 CLUAP1 experiment03
IFT88 IFT70 experiment04
IFT88 IFT57 experiment04
IFT88 IFT74 experiment04
IFT57 IFT88 experiment05
IFT88 IFT57 experiment06`);
            $("#DataSource").val("intact");
    });

    $("#ex5").click(function() {
            $("#prots_input").val(`TTC30B
CLUAP1
IFT172
IFT80
IFT20
TRAF3IP1
IFT57
IFT52
TTC30A
IFT88
IFT46
IFT27
IFT22
HSPB11
IFT81
IFT74
TTC26`);
            $("#DataSource").val("intact");
    });
});
</script>
        <script
                type="text/javascript"
                src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.17.0/jquery.validate.min.js"
        ></script>
        <script
                type="text/javascript"
                src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.17.0/additional-methods.js"
        ></script>
        <!-- Matomo -->
        <script type="text/javascript">
                var _paq = window._paq = window._paq || [];
                /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
                _paq.push(['trackPageView']);
                _paq.push(['enableLinkTracking']);
                (function() {
                        var u="https://tr-denbi.embl.de/heimdall/";
                        _paq.push(['setTrackerUrl', u+'matomo.php']);
                        _paq.push(['setSiteId', '36']);
                        var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
                        g.type='text/javascript'; g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
                })();
        </script>
        <!-- End Matomo Code -->
</head>

<body>
        <div class="grid-container">
                {% include "header.html" %}
                <div class="content">
                        <div class="load-container">
                                <div id="loading_msg">
                                        <p>Your job is running...</p>
                                        <br/>
                                </div>
                                <div class="loader"></div>
                        </div>

                        <div class="intro-container">
                                <div class="section-title" style="color: #2c2c2c;">
                                        <h3><strong>WeSA: Rank interactors</strong></h3>
                                </div>
                                <div class="intro-content">
                                        <div class="intro-paragraph">
                                                <p>
                                                        <strong>WeSA</strong>, (weighted socioaffinity), is a statistical
                                                        score which can rank results from protein experiments of the bait-prey
                                                        type, e.g. affinity purification, immunoprecipitation or proximity labelling.
                                                </p>
                                                <br>
                                                <p>
                                                        You can enter lists of interacting proteins according to the results
                                                        of your experiment. Input your raw data before any filtering is done.
                                                </p>
                                                <br>
                                                <p>
                                                        As a result you will get a re-ordered list of scores which allows you to
                                                        understand which interactions are more likely than others based on what
                                                        previous experiments can add to your data.
                                                </p><br>
                                                <p>
                                                     <!--   <i class="far fa-file-alt"></i>  <a href='https://www.ncbi.nlm.nih.gov/pmc/articles/PMC8262711/'>
                                                                Gonzalez-Sanchez et al., 2021 </a><br> -->
                                                </p>
                                        </div>
                                        <div class="intro-slideshow">
                                                <div class="mySlides">
                                                        <img class="slide-image"
                                                        src="{{ url_for('static',filename='images/gallery-01.png') }}"
                                                        />
                                                        <!-- <div class="slide-text">Example 1</div> -->
                                                </div>
                                                <div class="mySlides">
                                                        <img class="slide-image"
                                                        src="{{ url_for('static',filename='images/gallery-02.png') }}"
                                                        />
                                                        <!-- <div class="slide-text">Example 2</div> -->
                                                </div>
                                                <div class="mySlides">
                                                        <img class="slide-image"
                                                        src="{{ url_for('static',filename='images/gallery-03.png') }}"
                                                        />
                                                </div>
                                                <a class="prev" onclick="plusSlides(-1)">&#10094;</a>
                                                <a class="next" onclick="plusSlides(1)">&#10095;</a>
                                                <div class="dot-container">
                                                        <span class="dot" onclick="currentSlide(1)"></span>
                                                        <span class="dot" onclick="currentSlide(2)"></span>
                                                        <span class="dot" onclick="currentSlide(3)"></span>
                                                </div>
                                        </div>
                                </div>
                        </div>

                        <br>

                        <div class="main-container">
                                <div class="section-title">
                                        <h3><strong>Submit your query</strong></h3>
                                </div>
                                <form
                                name="myForm"
                                action="/output"
                                method="post"
                                novalidate="novalidate"
                                enctype="multipart/form-data"
                                >
                                        <div class="form-container">

                                                <div class="boxes-container">
                                                        <div class="box-container">
                                                                <label for="prots_input"><b>Protein pairs or proteins:</b></label>
                                                                <br />
                                                                <textarea
                                                                        id="prots_input"
                                                                        name="prots_input"
                                                                        aria-required="true"
                                                                        required=""
                                                                        placeholder="Enter a list of interacting proteins using gene names and their experiment ID. Separate with space, e.g: TP53 IFT74 Interaction1. You can also query our database for all already discovered interactions and their scores by inputting a list of proteins of interest."
                                                                ></textarea>
                                                                <br />
                                                                <label for="file_prots">Or select a file:</label>
                                                                <input type="file" id="file_prots" name="file_prots">
                                                                <br />
                                                                <!--<button
                                                                        type="button"
                                                                        class="button1 button_light"
                                                                        id="prots_input_upload"
                                                                        onclick="uploadInput('prots_input')"
                                                                >
                                                                        Upload
                                                                </button>-->
                                                                <button
                                                                        type="button"
                                                                        class="button1 button_light"
                                                                        onclick="resetInput('prots_input')"
                                                                >
                                                                        <i class="far fa-trash-alt"></i>
                                                                </button>
                                                        </div>

                                                        <!--<div class="box-container">
                                                                <label for="muts_input"
                                                                        ><b>Variants / Modifications:</b></label
                                                                >
                                                                <br />
                                                                <textarea
                                                                        id="muts_input"
                                                                        name="muts_input"
                                                                        aria-required="true"
                                                                        placeholder="Enter a list of protein variants/modifications E.g:&#x0a;Q02556/R404fs&#x0a;P16885/P236L&#x0a;P05771/G425V&#x0a;P56385/K34K-ac"
                                                                ></textarea>
                                                                <br />
                                                                <label for="muts_input_file">Or select a file:</label>
                                                                <input type="file" id="muts_input_file" />
                                                                <br />
                                                                <button
                                                                        type="button"
                                                                        class="button1 button_light"
                                                                        id="muts_input_upload"
                                                                        onclick="uploadInput('muts_input')"
                                                                >
                                                                        Upload
                                                                </button>
                                                                <button
                                                                        type="button"
                                                                        class="button1 button_light     "
                                                                        onclick="resetInput('muts_input')"
                                                                                                >
                                                                        <i class="far fa-trash-alt"></i>
                                                                </button>
                                                        </div> -->
                                                </div>
                                                <hr>

                                                <div class="extra-container">
                                                        <div class="options-container">
                                                                <label for="DataSource">Dataset to calculate scores against: </label>
                                                                          <select id="DataSource" name="DataSource">
                                                                              <option value="intact" selected="">IntAct</option>
                                                                              <option value="biogrid">BioGrid</option>
                                                                              <option value="bioplex">BioPlex</option>
                                                                              <option value="intact_bioGrid">IntAct & BioGrid</option>
                                                                              <option value="intact_bioPlex">IntAct & BioPlex</option>
                                                                              <!-- <option value="bioplex">BioPlex</option> -->
                                                                              <option value="bioGrid_bioPlex">BioGrid & BioPlex</option>
                                                                              <option value="all">IntAct & BioGrid & BioPlex</option>
                                                                          </select>
                                                                <!--<div class="option">
                                                                        <label for="species">Organism:</label>
                                                                        <select name="species" id="species">
                                                                                <option value="HUMAN" selected>
                                                                                        Human (Homo sapiens, TaxId: 9606)
                                                                                </option>
                                                                                <option value="MOUSE">
                                                                                        Mouse (Mus musculus, TaxId: 10090)
                                                                                </option>
                                                                                <option value="DROME">
                                                                                        Fruit Fly (Drosophila melanogaster, TaxId: 7227)
                                                                                </option>
                                                                                <option value="ARATH">
                                                                                        Arabidopsis (Arabidopsis thaliana, TaxId: 3702)
                                                                                </option>
                                                                                <option value="CAEEL">
                                                                                        Worm (Caenorhabditis elegans, TaxId: 6239)
                                                                                </option>
                                                                                <option value="DANRE">
                                                                                        Zebrafish (Danio rerio, TaxId: 7955)
                                                                                </option>
                                                                                <option value="XENTR">
                                                                                        Frog (Xenopus tropicalis, TaxId: 8364)
                                                                                </option>
                                                                                <option value="YEAST">
                                                                                        Yeast (Saccharomyces cerevisiae [S288C], TaxId: 559292)
                                                                                </option>
                                                                                <option value="SARS2">
                                                                                        SARS-CoV-2 (2019-nCoV, TaxId: 2697049)
                                                                                </option>
                                                                        </select>
                                                                </div>

                                                                <div class="option">
                                                                        <i class="fas fa-question-circle help-icon""
                                                                        data-title="Adds a number of known interactors per each input protein to the final network.
                                                                                                These proteins are obtained in order of the amount of experimental evidence supporting the interaction
                                                                                                (from highest to lowest)."></i>
                                                                </div>
                                                                <div class="option">
                                                                        <input
                                                                                type="checkbox"
                                                                                id="only_int_pairs"
                                                                                name="only_int_pairs"
                                                                                value="true"
                                                                                checked
                                                                        />
                                                                        <label for="only_int_pairs">
                                                                                Show interactions only between protein and its
                                                                                interactors
                                                                        </label>
                                                                        <i class="fas fa-question-circle help-icon"
                                                                        data-title="If additional interactors are included (option above),
                                                                                                Mechnetor won't look for interactions among these additional proteins.
                                                                                                It will look only between input proteins and their imported set of known interactors.
                                                                                                This can save a lot of time if you are only interested in studying particular proteins."></i>
                                                                </div>
                                                                <div class="option">
                                                                        <input
                                                                                type="checkbox"
                                                                                id="hide_no_int"
                                                                                name="hide_no_int"
                                                                                value="true"
                                                                                checked
                                                                        />
                                                                        <label for="hide_no_int">
                                                                                Hide proteins without any interaction mechanisms
                                                                        </label>
                                                                        <i class="fas fa-question-circle help-icon"
                                                                        data-title="The resulting network will hide proteins for which no mechanistic connection to any other could be found.
                                                                        This reduces the workload of the initial network view. Hidden proteins can be later manually toggled on."></i>
                                                                </div>-->
                                                        </div>
                                                        <div class="examples-container">
                                                                Examples:
                                                                <button class="button1 ex_button" type="button" id="ex1">1</button>
                                                                <button class="button1 ex_button" type="button" id="ex2">2</button>
                                                                <button class="button1 ex_button" type="button" id="ex3">3</button>
                                                                <button class="button1 ex_button" type="button" id="ex4">4</button>
                                                                <button class="button1 ex_button" type="button" id="ex5">5</button>
                                                        </div>
                                                </div>

                                                <div class="buttons-container">
                                                        <div>
                                                                <button
                                                                type="submit"
                                                                class="button1 button_big"
                                                                onclick="loading();"
                                                                >
                                                                        <i class="fas fa-chevron-circle-right" style="padding-right:5px;"></i>
                                                                        Submit
                                                                </button>
                                                                <button
                                                                type="reset"
                                                                class="button1 button_big"
                                                                style="width: 80px;"
                                                                >
                                                                        <i class="fas fa-sync" style="padding-right:5px;"></i>
                                                                        Reset
                                                                </button>
                                                        </div>
                                                </div>
                                        </div>
                                </form>
                        </div>
                </div>

                {% include "footer.html" %}

        </div>


        <script>

                function resetInput(id) {
                        document.getElementById(id).value="";
                }

                function loading() {
                        document.body.scrollTop = 0;
                        document.documentElement.scrollTop = 0;
                        $(".load-container").show();
                        $(".main-container").hide();
                        $(".intro-container").hide();
                }
                function uploadInput(id) {
                        var fileInput = document.querySelector("#" + id + "_file");
                        var textFromFile = "";
                        var file = fileInput.files[0];
                        var reader = new FileReader();
                        reader.onload = function (e) {
                                textFromFile = e.target.result;
                                document.getElementById(id).value = textFromFile;
                        };
                        reader.readAsText(file);
                }

                // var slideIndex = 1;
                // showSlides(slideIndex);

                function plusSlides(n) {
                        showSlides(slideIndex += n);
                }

                function currentSlide(n) {
                        showSlides(slideIndex = n);
                }

                function showSlides(n) {
                        var i;
                        var slides = document.getElementsByClassName("mySlides");
                        var dots = document.getElementsByClassName("dot");
                        if (n > slides.length) {slideIndex = 1}
                        if (n < 1) {slideIndex = slides.length}
                                for (i = 0; i < slides.length; i++) {
                                        slides[i].style.display = "none";
                        }
                        for (i = 0; i < dots.length; i++) {
                                dots[i].className = dots[i].className.replace(" active", "");
                        }
                        slides[slideIndex-1].style.display = "block";
                        dots[slideIndex-1].className += " active";
                }

                var slideIndex = 0;
                showSlidesAuto();

                function showSlidesAuto() {
                        var i;
                        var slides = document.getElementsByClassName("mySlides");
                        var dots = document.getElementsByClassName("dot");
                        for (i = 0; i < slides.length; i++) {
                                slides[i].style.display = "none";
                        }
                        slideIndex++;
                        if (slideIndex > slides.length) {slideIndex = 1}
                        for (i = 0; i < dots.length; i++) {
                                dots[i].className = dots[i].className.replace(" active", "");
                        }
                        slides[slideIndex-1].style.display = "block";
                        dots[slideIndex-1].className += " active";
                        setTimeout(showSlidesAuto, 10000); // Change image every 2 seconds
                }
        </script>
</body>

</html>